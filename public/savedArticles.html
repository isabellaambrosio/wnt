<!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.3/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body>

    <!--NAV BAR-->

    <nav>
        <div class="nav-wrapper">
            <a href="index.html" class="brand-logo center">What's New Today</a>
            <ul class="left hide-on-med-and-down">
                <li class="active"><a href="savedArticles.html">Saved Articles</a></li>
                <li><a href="index.html">Home</a></li>

            </ul>
            <a href="#" id="scrape" class="waves-effect waves-light btn">Scrape</a>
        </div>
    </nav>


    <main>
        <br>
        <br>
        <br>
        <!--CONTAINER-->
        <div class="container">
            <div class="row">
                <div class="col m12">


                    <!--COLLECTION-->
                    <ul class="collection with-header">
                        <div id="articlesSaved"></div>
                    </ul>


                </div>

                <!--MODAL-->
                <div id="modal1" class="modal">
                    <div class="modal-content">
                        <span id="showNotes"> </span>
                        <h4>Add Note</h4>
                        <form>
                            <div class="dinamicTitle"></div>
                            <h6>Title</h6>
                            <input id="addTitle" type="text" />
                            <h6>Note</h6>
                            <input id="addNote" type="text" />
                            <!--<input id="saveNote" type="submit" data-id="data._id" value="Submit" />-->
                        </form>
                        <div class="modal-footer" id="modalButton">
                            <!--<button id='saveNote' data-id='data[0]._id' type="submit" class="modal-action modal-close btn waves-effect waves-green btn-flat">Send</button>-->
                        </div>
                    </div>


                </div>
                <!--end of column-->
            </div>
            <!--endo of row-->
        </div>
        <!--end of container-->
    </main>

    <!--JQuery-->

    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>

    <!--JavaScript at end of body for optimized loading-->
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.3/js/materialize.min.js"></script>
    <script type="text/javascript" src="initializations.js"></script>
    <script type="text/javascript" src="app.js"></script>


    <script>
        // Grab the articles as a json
        $.getJSON("/articles/saved", function(data) {
            console.log("TEST " + JSON.stringify(data));
            // For each one
            for (let i = 0; i < data.length; i++) {
                // Display the apropos information on the page

                $("#articlesSaved")
                    .append(`<li class="collection-header">
                <h4> ${data[i].title} </h4>
                </li>
                <li class="collection-item">
                <h5><a>${data[i].link}</a></h5>
                <a class="waves-effect waves-light btn delete" data-id="${data[i]._id}">Delete Article</a>
                <a class="waves-effect waves-light btn modal-trigger" id='addNote' href="#modal1" data-id="${data[i]._id}">Add Note</a>
                </li>`);

            }
        });
    </script>

</body>

</html>
